---
icon: IconDirectory
title: 'middleware'
head.title: Middleware directory
---

# Middleware directory

Nuxt provides a customizable page middleware framework you can use throughout your application, ideal for extracting code that you want to run before navigating to a particular route.

::alert{type=info}
Nuxt page middleware run within the Vue part of your Nuxt app. Despite the name, they are completely different from server middleware, which are run in the Nitro server part of your app.
::

There are two kinds of page middleware:

1. Anonymous (or inline) middleware, which are defined directly in the pages where they are used.
2. Named middleware, which are placed in the `middleware/` directory and will be automatically loaded via asynchronous import when used on a page.

Both kinds of middleware can be [defined in `definePageMeta`](/docs/directory-structure/pages).

If you use the `.global` suffix on a middleware in that directory (for example, `~/middleware/auth.global.ts`), the middleware will run before every route navigation.

## Format

Nuxt middleware are navigation guards that receive the current route and the next route as arguments.

```js
export default defineNuxtRouteMiddleware((to, from) => {
  if (to.params.id === '1') {
    return abortNavigation()
  }
  return navigateTo('/')
})
```

Nuxt provides two globally available helpers that can be returned directly from the middleware:

1. `navigateTo (route: string | Route)` - Redirects to the given route, within plugins or middleware. It can also be called directly on client side to perform a page navigation.
2. `abortNavigation (err?: string | Error)` - Aborts the navigation, with an optional error message.

Unlike, navigation guards in [the vue-router docs](https://next.router.vuejs.org/guide/advanced/navigation-guards.html#global-before-guards), a third `next()` argument is not passed, and redirects or route cancellation is handled by returning a value from the middleware. Possible return values are:

* nothing - does not block navigation and will move to the next middleware function, if any, or complete the route navigation
* `navigateTo('/')` or `navigateTo({ path: '/' })` - redirects to the given path
* `abortNavigation()` - stops the current navigation
* `abortNavigation(error)` - rejects the current navigation with an error

::alert{type=warning}
It is advised to use the helper functions above for performing redirects or stopping navigation. Other possible return values described in [the vue-router docs](https://next.router.vuejs.org/guide/advanced/navigation-guards.html#global-before-guards) may work but there may be breaking changes in future.
::

## Example: a named middleware

```bash
-| middleware/
---| auth.ts
```

In your page file, you can reference this middleware

```vue
<script setup>
definePageMeta({
  middleware: ["auth"]
  // or middleware: 'auth'
})
</script>
```

Now, before navigation to that page can complete, the `auth` middleware will be run.
